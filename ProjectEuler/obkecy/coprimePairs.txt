Count of reduced proper fractions with denominator <= n
how many of them have numerator 1?
n-1 of them, since 1/x is reduced, but 1/1 is not proper
how many have 2?
all that are odd, the count of which up to n is ceil(n/2)-1 excluding 1
what about 3?
going by the denominator k, all those where not k|3, which is about 2/3 of n -> ceil(n*2/3)-1
so for n=8 that would make 3/1, 3/2, 3/4, 3/5, 3/7, 3/8
but for k up to 3 don't count, so we have to modify a slight bit
so, -(k-1) instead of -1
4 is 2^2, so it's coprime to everything that 2 is to, we only don't count the 3, which 2 is coprime to as 3<4
5 is relatively simple-for the primes p, n-ceil(n*(i-1)/i)-(i-1) works.
for composites, not so easy. For primes p&q, p*q is comprime to those coprime to p AND to q, and we only count those >p*q
Which brings us to 6 = 2*3. 2 is comprime to every odd number, and 3 is coprime to not every third number. We know 6 is coprime to 6n+1 and 6n+5, but that's just not ideal. If we try to use this, it brings us to floor(n/6)+1 (if n%6>0) +1 (if n%6>4)  which is terribly ugly. 
Point is, tihs isn't gonna work. 

Note: 510510 = 2*3*5*7*11*13*17 the 7th primorial is the smallest primorial <10**6


Just had a great new idea to solve this
Generate the prime array, then have an 10**6 length array, primeExpList
For each p in primes, go over all n in the nums divisible by it.
For each, if needed, pad the primeExpList with 0s to have length equal to prime index, set the last one to floor(log_p(n)), or through a FOR
Run through this list, 

https://www.desmos.com/calculator/8zxfnqc4n9
example, n=8:
k = 1:
1/2, 1/3, 1/4, 1/5, 1/6, 1/7, 1/8	total=7
k = 2:
2/3, 2/5, 2/7 						total=3
k = 3:
3/4, 3/5, 3/7, 3/8					total=4
k = 4:
4/5, 4/7
k = 5:
5/6, 5/7, 5/8
k = 6:
6/7

In a spark of briliance, I noticed that |a|_(p*q), for p,q in P appears to equal (p-1)(q-1). Tested for primes up until p_50, holds. Have no idea how to prove it, but would make everything a lot easier. This is my conjecture, the second bold one I've had. Can't remember what the first was, but oh well. 

Stronger statement: |a|_prod(x in A) = prod(k-g1) for k in A, A is subset of primes. 
Write a test for |A| = 3

Holds for primes up to p_25, took 68 secs

At this point, we can just assume it's true, though it's still a very interesting question

|a| = phi(a) : Euler's totient
prod(p-1 for primes in b)